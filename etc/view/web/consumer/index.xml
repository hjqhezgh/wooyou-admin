<?xml version="1.0" encoding="UTF-8"?>
<viewport>
    <!--面包屑-->
    <crumbs>
        <crumb text="客户信息" url="javascript:void(0);"/>
        <crumb text="客户管理" currentPage="true"/>
    </crumbs>

    <customgridpanel url="/consumer.json" pageSize="15" title="客户列表" id="grid1" width="1200" height="400" loadUrl="false">

        <search field="cid" searchType="eq" inputType="remoteSelect" desc="所属中心" url="/web/center/alldata" valueField="cid" descField="name" />
        <search field="name" searchType="like" inputType="text" desc="客户姓名"/>
        <search field="mySort" searchType="eq" inputType="localSelect" desc="排序方式（默认按最后通话时间）" localData="[{desc:'按最后通话时间',value:'time'},{desc:'按频率',value:'frequency'}]"/>

        <toolaction desc="添加客户" url="/web/consumer/add" linkType="iframeWindow" colorClass="h-bg-green"/>

        <column field="centerName" desc="所属门店"/>
        <column field="employeeName" desc="所属顾问"/>
        <column field="consumer_name" desc="母亲"/>
        <column field="consumer_name" desc="母亲电话"/>
        <column field="consumer_name" desc="父亲"/>
        <column field="consumer_name" desc="父亲电话"/>
        <column field="consumer_name" desc="家庭电话"/>
        <column field="consumer_name" desc="孩子姓名"/>
        <column field="consumer_name" desc="通话数"/>
        <column field="consumer_name" desc="最后通话时间"/>
        <column field="consumer_name" desc="状态">
            <formatter>
                <![CDATA[
                if(cellvalue==1){
                    return '<span style="color:red;">未联系</span>';
                }else if(cellvalue==2){
                    return '<span>待确认</span>';
                }else if(cellvalue==3){
                    return '<span style="color:#ccc;">已废弃</span>';
                }else if(cellvalue==4){
                    return '<span style="color:blue;">已邀约至中心</span>';
                }else if(cellvalue==5){
                    return '<span style="color:green;">签到成功</span>';
                }
                ]]>
            </formatter>
        </column>
        <column field="consumer_name" desc="是否APP用户">
            <formatter>
                <![CDATA[
                if(cellvalue){
                    return '是';
                }else{
                    return '<a style="color:blue;text-decoration: underline;" target="_blank" title="APP开户" href="/web/consumer/add_app_account?id='+options.rowId+'" data-action="openIframeWindow">APP开户</a>';
                }
                ]]>
            </formatter>
        </column>
        <!--<action desc="添加" url="/web/consumer/add" linkType="newPage"/>-->
        <action desc="修改" url="/web/consumer/modify" linkType="iframeWindow" actionParams="[{name:'id',value:'id'}]" width="800" height="600"/>
    </customgridpanel>
</viewport>